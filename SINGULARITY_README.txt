Singularity https://sylabs.io/docs/

---

Containerizing Cytosim:

- cytosim.def : Singularity definition file used to build the Singularity image file
- cytosim.sif : Singularity image file (generated by the build command)

---

Building an image file (requires sudo, build on personal machine):

$ sudo singularity build cytosim.sif cytosim.def

Notes: 
- I use Arch Linux as the bootstrap for the cytosim container, and I am pretty sure you would need to be running Arch as well to use the cytosim.def file as is (because Singularity will call pacstrap). It is possible to rewrite the cytosim.def file to use another Linux distro as the bootstrap. See singularity documentation for using other Linux distros to build from a *.def file.
- I make minor modifications to the simul_report.cc and makefile.inc files, and import them into the container to replace the original files in the Cytosim source code before compiling. 
- The version of Cytosim that I compile is the 24 November 2020 version. 

---

Using the resulting image file (does not require sudo, can run on cluster):

For 2D:
$ singularity exec /home/cytosim/bin/sim2 ... 
$ singularity exec /home/cytosim/bin/report2 ...
$ singularity exec /home/cytosim/bin/play2 ...

For 3D:
$ singularity exec /home/cytosim/bin/sim3 ...
$ singularity exec /home/cytosim/bin/report3 ...
$ singularity exec /home/cytosim/bin/play3 ...

For any dimensionality:
$ singularity exec /home/cytosim/bin/frametool ...
$ singularity exec /home/cytosim/bin/reportF ...

